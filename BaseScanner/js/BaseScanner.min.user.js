// ==UserScript==
// @name        BaseScanner
// @version     2020.01.19
// @author      leo7044 (https://github.com/leo7044)
// @homepage    https://cnc.indyserver.info/BaseScanner/
// @downloadURL https://cnc.indyserver.info/BaseScanner/js/BaseScanner.min.user.js
// @updateURL   https://cnc.indyserver.info/BaseScanner/js/BaseScanner.min.user.js
// @require		https://code.jquery.com/jquery-3.3.1.min.js
// @description BaseScanner
// @include     https://cncapp*.alliances.commandandconquer.com/*/index.aspx*
// @grant       none
// ==/UserScript==

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('!x(){j e,t=x(){x e(){j e=[],t=[];x a(){14=z.E.H.J().1z().1X(),1n=[],17=[],Q=[],U=0}x n(){K(j e=1o 1A(8).1B().1Y(e=>1o 1A(9).1B()),t=z.E.H.J().V().1b(),a=0;a<8;a++)K(j n=0;n<9;n++)t.1C(n,a)&&(e[a][n]=t.1C(n,a));j r=t.1D(),i=t.1E(),o=0,s=0,c=0,l=0,u=0,g=0,p=0,f=0,b=0,y=0,d=0,C=0,h=0,I=0,S=0,1p=0,D=0,v=0,m=0,A=0,G=0,k=0,L=0,B=0,M=0;K(a=0;a<8;a++)K(n=0;n<9;n++)R(1F==e[a][n]){j O=0,F=0,T=0,P=0;1c(0==n&&0==a?(1==e[a][n+1]?(F++,T++):2==e[a][n+1]?(O++,T++):P++,1==e[a+1][n+1]?(F++,T++):2==e[a+1][n+1]?(O++,T++):P++,1==e[a+1][n]?(F++,T++):2==e[a+1][n]?(O++,T++):P++):8==n&&0==a?(1==e[a][n-1]?(F++,T++):2==e[a][n-1]?(O++,T++):P++,1==e[a+1][n-1]?(F++,T++):2==e[a+1][n-1]?(O++,T++):P++,1==e[a+1][n]?(F++,T++):2==e[a+1][n]?(O++,T++):P++):0==a?(1==e[a][n-1]?(F++,T++):2==e[a][n-1]?(O++,T++):P++,1==e[a+1][n-1]?(F++,T++):2==e[a+1][n-1]?(O++,T++):P++,1==e[a+1][n]?(F++,T++):2==e[a+1][n]?(O++,T++):P++,1==e[a+1][n+1]?(F++,T++):2==e[a+1][n+1]?(O++,T++):P++,1==e[a][n+1]?(F++,T++):2==e[a][n+1]?(O++,T++):P++):0==n&&7==a?(1==e[a-1][n]?(F++,T++):2==e[a-1][n]?(O++,T++):P++,1==e[a-1][n+1]?(F++,T++):2==e[a-1][n+1]?(O++,T++):P++,1==e[a][n+1]?(F++,T++):2==e[a][n+1]?(O++,T++):P++):0==n?(1==e[a-1][n]?(F++,T++):2==e[a-1][n]?(O++,T++):P++,1==e[a-1][n+1]?(F++,T++):2==e[a-1][n+1]?(O++,T++):P++,1==e[a][n+1]?(F++,T++):2==e[a][n+1]?(O++,T++):P++,1==e[a+1][n+1]?(F++,T++):2==e[a+1][n+1]?(O++,T++):P++,1==e[a+1][n]?(F++,T++):2==e[a+1][n]?(O++,T++):P++):8==n&&7==a?(1==e[a][n-1]?(F++,T++):2==e[a][n-1]?(O++,T++):P++,1==e[a-1][n-1]?(F++,T++):2==e[a-1][n-1]?(O++,T++):P++,1==e[a-1][n]?(F++,T++):2==e[a-1][n]?(O++,T++):P++):7==a?(1==e[a][n-1]?(F++,T++):2==e[a][n-1]?(O++,T++):P++,1==e[a-1][n-1]?(F++,T++):2==e[a-1][n-1]?(O++,T++):P++,1==e[a-1][n]?(F++,T++):2==e[a-1][n]?(O++,T++):P++,1==e[a-1][n+1]?(F++,T++):2==e[a-1][n+1]?(O++,T++):P++,1==e[a][n+1]?(F++,T++):2==e[a][n+1]?(O++,T++):P++):8==n?(1==e[a-1][n]?(F++,T++):2==e[a-1][n]?(O++,T++):P++,1==e[a-1][n-1]?(F++,T++):2==e[a-1][n-1]?(O++,T++):P++,1==e[a][n-1]?(F++,T++):2==e[a][n-1]?(O++,T++):P++,1==e[a+1][n-1]?(F++,T++):2==e[a+1][n-1]?(O++,T++):P++,1==e[a+1][n]?(F++,T++):2==e[a+1][n]?(O++,T++):P++):(1==e[a-1][n]?(F++,T++):2==e[a-1][n]?(O++,T++):P++,1==e[a-1][n+1]?(F++,T++):2==e[a-1][n+1]?(O++,T++):P++,1==e[a][n+1]?(F++,T++):2==e[a][n+1]?(O++,T++):P++,1==e[a+1][n+1]?(F++,T++):2==e[a+1][n+1]?(O++,T++):P++,1==e[a+1][n]?(F++,T++):2==e[a+1][n]?(O++,T++):P++,1==e[a+1][n-1]?(F++,T++):2==e[a+1][n-1]?(O++,T++):P++,1==e[a][n-1]?(F++,T++):2==e[a][n-1]?(O++,T++):P++,1==e[a-1][n-1]?(F++,T++):2==e[a-1][n-1]?(O++,T++):P++),O){q 6:o++;w;q 5:s++;w;q 4:c++;w;q 3:l++;w;q 2:u++;w;q 1:g++}1c(F){q 6:p++;w;q 5:f++;w;q 4:b++;w;q 3:y++;w;q 2:d++;w;q 1:C++}1c(T){q 6:h++;w;q 5:I++;w;q 4:S++;w;q 3:1p++;w;q 2:D++;w;q 1:v++}1c(P){q 8:m++;w;q 7:A++;w;q 6:G++;w;q 5:k++;w;q 4:L++;w;q 3:B++;w;q 2:M++}}1d{1Z:20.21(),22:r,23:i,1e:24.25(e),26:[o,s,c,l,u,g,p,f,b,y,d,C,h,I,S,1p,D,v,m,A,G,k,L,B,M]}}x r(e){K(j a=z.E.H.J().V().1f().d[e].27(),n=z.E.H.J().V().1f().d[e].28(),r=1g(a-14);r<=1g(a+14);r++)K(j i=1g(n-14);i<=1g(n+14);i++){R(18.29(18.1G(r-a,2)+18.1G(i-n,2))<=14){j o=z.E.H.J().1h().1i(r,i);R(o)R(3==o.1j&&(o[17[10]]>0||o[17[11]]>0)){j s=o[17[12]];-1==Q.1k(s)&&-1==t.1k(s)&&Q.Z(s)}1l R(2==o.1j){s=o[1n[12]];-1==Q.1k(s)&&-1==t.1k(s)&&Q.Z(s)}}}}15.2a.2b("W",{1H:"2c",2d:15.1q.2e,2f:x(){X.13("2g W...")},2h:{1I:x(){N.1m=!1,N.16=1o 15.2i.2j.2k("1r W...").2l({2m:!0,2n:!0}),N.16.2o("2p",x(){N.1m?N.1s():N.1J()},N),N.1K=15.1q.1L.1M(),N.1K.2q().2r(N.16,{2s:2t,2u:0})},1J:x(){N.1m=!0,N.16.19("2v W..."),X.13("1r..."),a(),x(){j e=z.E.H.J().V().1f().d;K(j t 1a e){K(j a=e[t].1D(),n=e[t].1E(),r=0,i=0,o=0,s=0,c=a-10;c<a+10;c++){K(j l=n-10;l<n+10;l++){j u=z.E.H.J().1h().1i(c,l);R(1F!=u)R(2!=u.1j||r||i)R(3!=u.1j||o||s){R(r&&i&&o&&s)w}1l o=c,s=l;1l r=c,i=l}R(r&&i&&o&&s)w}R(r&&i&&o&&s)w}K(j t 1a z.E.H.J().1h().1i(r,i))1n.Z(t);K(j t 1a z.E.H.J().1h().1i(o,s))17.Z(t)}(),x(){j e=z.E.H.J().V().1f().d;K(j t 1a e){j a=e[t],n=a.2w();r(n)}}(),x a(){K(j r 1a Q){j i=Q[r];z.E.H.J().V().2x(i),1t(x(){z.E.H.J().V().1b()?z.E.H.J().V().1b().2y().c&&z.E.H.J().V().1b().2z()<0?(U=0,e.Z(n()),t.Z(i),Q.1u(0,1),X.13(e.Y+" / "+Q.Y),W.1v().19(e.Y,e.Y+Q.Y),a()):U<5?(U++,X.13("1e 1w 1x ("+U+")"),a()):(X.13("1e 1w 1x ("+U+"), 1N 1O 1P 1Q"),Q.1u(0,1),U=0,a()):U<5?U+=1:(X.13("1e 1w 1x ("+U+"), 1N 1O 1P 1Q"),Q.1u(0,1),U=0,a())},1y);w}Q.Y||(x(){K(j t=z.E.H.J().1z().2A(),a=z.E.H.J().2B().2C(),n=0;n<18.1R(e.Y/30);n++){j r=[];R(n==18.1R(e.Y/30)-1)K(j i=30*n;i<e.Y;i++)r.Z(e[i]);1l K(j i=30*n;i<30*(n+1);i++)r.Z(e[i]);j o={2D:"2E",2F:r,2G:t,2H:a};$.2I("2J://2K.2L.2M/W/1S/2N.1S",o).2O(x(e){X.13(e)})}}(),1t(x(){W.1v().1s()},1y))}()},1s:x(){N.1m=!1,N.16.19("1r W..."),a()},19:x(e,t){N.16.19("2P 2Q... ("+e+" / "+t+")")},2R:x(){1d e},2S:x(){1d t}}}),W.1v().1I()}!x t(){2T{R("2U"!=2V 15&&15.1q.1L.1M().2W())1d 1T e()}2X(e){1T 0!==X?X.13(e):1U.1V?1V.2Y(e):2Z(e)}1U.1t(t,1y)}()};(e=1W.31("32")).33="("+t.34()+")();",e.1H="35/36",1W.37("38")[0].39(e)}();',62,196,'|||||||||||||||||||var|||||||case||||||break|function||ClientLib|||||Data|||MainData||GetInstance|for|||this|||ArrayIdsForScan|if|||errorCounter|get_Cities|BaseScanner|console|length|push||||log|attRange|qx|buttonBaseScanner|ArrayPrototypeGameObjectType3|Math|setLabel|in|get_CurrentCity|switch|return|Layout|get_AllCities|parseInt|get_World|GetObjectFromPosition|Type|indexOf|else|ScriptIsRunning|ArrayPrototypeGameObjectType2|new|_|core|Start|stopBaseScan|setTimeout|splice|getInstance|not|found|1e3|get_Server|Array|fill|GetResourceType|get_X|get_Y|null|pow|type|initialize|startBaseScan|app|Init|getApplication|removing|it|from|scan|ceil|php|void|window|opera|document|get_MaxAttackDistance|map|Zeit|Date|now|PosX|PosY|JSON|stringify|EvaluatedFields|get_PosX|get_PosY|sqrt|Class|define|singleton|extend|Object|construct|create|members|ui|form|Button|set|center|rich|addListener|click|getDesktop|add|right|125|top|Stop|get_Id|set_CurrentCityId|get_Buildings|get_OwnerId|get_WorldId|get_Player|get_Name|action|sendDataFromInGame|ObjectData|WorldId|PlayerName|post|https|cnc|indyserver|info|manageBackend|always|Scan|Base|getArrayLayouts|getArrayScannedIds|try|undefined|typeof|getMenuBar|catch|postError|GM_log||createElement|script|innerHTML|toString|text|javascript|getElementsByTagName|head|appendChild'.split('|'),0,{}))