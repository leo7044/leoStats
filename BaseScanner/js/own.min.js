/* Developer: leo7044 (https://github.com/leo7044) */
var ArrayLayouts=[];function setDefaultValues(){MinDate.value=new Date((new Date).getTime()-6048e5).toISOString().split("T")[0],null!=$_GET().WorldId&&(WorldId.value=$_GET().WorldId)}function getLayoutsOrderByType(a){var e=MinX.value||0,t=MaxX.value||0,n=MinY.value||0,r=MaxY.value||0,o=MinDate.value||new Date((new Date).getTime()-6048e5).toISOString().split("T")[0],i=PlayerName.value,s={action:"getLayoutsByWorldIdAndProcedureName",worldId:WorldId.value,procedureName:"getLayoutsOrderBy"+a,minX:e,maxX:t,minY:n,maxY:r,MinDate:o,PlayerName:i};$.ajaxSetup({async:!1}),$.post("php/manageBackend.php",s).always(function(a){ArrayLayouts=a}),$.ajaxSetup({async:!0}),"noLogin"==ArrayLayouts[1]?(LoginState.innerHTML='Please login: <a href="https://cnc.indyserver.info/" target="_blank">https://cnc.indyserver.info/</a>',Scans.innerHTML=""):"notAuthorized"==ArrayLayouts[1]?(LoginState.innerHTML="You are not authorized.",Scans.innerHTML=""):(LoginState.innerHTML="",drawLayouts())}function drawLayouts(){var a="";for(var e in ArrayLayouts){var t=ArrayLayouts[e],n=t.WorldId,r=t.Zeit,o=t.PlayerName,i=t.PosX,s=t.PosY,u=t.Layout,l=t.CncOpt,d=JSON.parse(u);for(var y in a+='<div class="scan"><div class="DivOneLayout"><table class="TableOneLayout">',d){for(var c in a+="<tr>",d[y])d[y][c]?a+='<td><img src="img/'+d[y][c]+'.png"></td>':a+="<td></td>";a+="</tr>"}a+='</table><div class="DivContent">',WorldId.value<=0&&(a+="WorldId: "+n+"<br/>"),a+="Zeit: "+r+'<br/>Coords: <a href="'+l+'" target="_blank">'+i+":"+s+"<br/></a>Scan by: "+o+"<br/></div></div></div>"}$("#Scans")[0].innerHTML=a}function getGetParas(){var a=window.location.search.substring(1).split("&");if(a.length){for(var e={},t=0;t<a.length;t++){var n=a[t].split("=");e[unescape(n[0])]=unescape(n[1])}window.$_GET=function(a){return a?e[a]:e}}}$(document).ready(function(){getGetParas(),setDefaultValues()});